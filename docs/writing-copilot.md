> 功能“写作辅助”的文档

## 功能

- 替换：将单词、短语、句子在意思不变的情况下，替换为更高级（或者单纯为了多用，辅助刻意训练的）的版本。
  - 替换单词、短语可能导致整个句子结构的变化
  - 写中文，用英文替换（需要判断主要语言）
- 补全建议
- 剔除邮件、链接、住址等等专有名词
- 识别编辑框的元数据（比如输入帐号、密码还是大段正文）

## 实现

### 替换

1. 在插件内完成断句、分词，排除基础的短语、词语、句子
2. 使用向量检索信息库中的块 （ 使用 BlockV1GetByEmbedding 完成 ）
3. 将检索到的块和原始句子一并提供给 LLM ，返回修改后的版本 （使用 RootV1RAG 完成）

## TODO

- [ ] 在任意网页上识别“文本编辑框”／可编辑区域（input, textarea, contenteditable, 富文本编辑器等）。
  - 静态扫描（页面加载或插件激活时）寻找 input, textarea，以及常见富文本编辑器的根节点（比如 .ql-editor, .ProseMirror 等）。
  - 动态监听：MutationObserver 观察新增节点（单页应用常见），同时监听 focusin/focusout 事件以捕获用户当前编辑上下文。
  - 忽略 readonly / disabled 元素
- [ ] 识别输入并计算修改建议
  - 在 focus 或键入后启动 debounce（例如 500ms）触发拼写/语法请求；对 selectionchange 做额外处理（用于 contenteditable 的光标定位）。
  - 提取语境：句子边界（以句号、换行、中文标点为准）、光标前后 1-2 句作为上下文
- [ ] 标注修改建议，不同的建议类型不同处理
- [ ] 应用修改建议
  - 对富文本编辑器避免直接修改内容 DOM（建议使用 overlay 高亮/建议层来提示并通过替换 API 或触发可用编辑器命令来应用）。
